// Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs

Table users {
  id integer [primary key]
  username varchar
  password_hash varchar
  tipo_utente varchar [note: 'utente o admin']
  nome varchar
  email varchar
  telefono varchar
  data_nascita datetime
}

Table campi {
  id integer [primary key]
  tipo_sport varchar [note: 'tennis, calcio a 5, calcio a 7, padel, beach volley, ecc.']
  coperto boolean
  costo decimal
  servizi text [note: 'spogliatoi, docce, ecc.']
  id_struttura integer
}

Table strutture {
  id integer [primary key]
  nome_struttura varchar
  id_utente integer
  indirizzo varchar
  descrizione text
  contatti varchar
}

Table prenotazioni {
  id integer [primary key]
  id_utente integer
  id_campo integer
  data_prenotazione timestamp
  stato varchar
  confermata boolean
}

Table recensioni {
  id integer [primary key]
  id_utente integer
  id_campo integer
  testo_recensione text
  voto integer [note: 'da 1 a 5']
  data_recensione timestamp
}

Ref: campi.id_struttura > strutture.id // many-to-one
Ref: strutture.id_utente > users.id // many-to-one
Ref: prenotazioni.id_utente > users.id // many-to-one
Ref: prenotazioni.id_campo > campi.id // many-to-one
Ref: recensioni.id_utente > users.id // many-to-one
Ref: recensioni.id_campo > campi.id // many-to-one
