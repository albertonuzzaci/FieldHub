// Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs

Table users {
  id integer [primary key]
  username varchar
  password_hash varchar
  is_propStruttura boolean
  is_utente boolean
  nome varchar
  cognome varchar
  img varchar
}

Table utenti {
  id integer [primary key]
  id_user integer
  email varchar
  numTelefono varchar
}

Table propStruttura {
  id integer [primary key]
  id_user integer
  id_struttura integer
}

Table strutture {
  id integer [primary key]
  nome_struttura varchar
  citta varchar
  indirizzo varchar
  num_civico integer
  descrizione text
  email varchar
  verified boolean
  numTelefono varchar
}

Table servizi {
  id integer [primary key]
  nome varchar [unique]
}

Table campi {
  id integer [primary key]
  tipo_sport varchar [note: 'tennis, calcio a 5, calcio a 7, padel, beach volley, ecc.']
  coperto boolean
  costo decimal
  id_struttura integer
  img varchar
}

Table prenotazioni {
  id integer [primary key]
  id_utente integer
  id_campo integer
  data date
  ora time
}

Table recensioni {
  id integer [primary key]
  id_utente integer
  id_campo integer
  id_struttura integer
  id_prenotazione integer
  testo text
  voto integer [note: 'da 1 a 5']
  data_recensione date
  data_prenotazione date
}

Ref: utenti.id_user > users.id // one-to-one
Ref: propStruttura.id_user > users.id // one-to-one
Ref: propStruttura.id_struttura > strutture.id // one-to-one
Ref: campi.id_struttura > strutture.id // many-to-one
Ref: servizi.id > campi.id // many-to-many
Ref: prenotazioni.id_utente > utenti.id // many-to-one
Ref: prenotazioni.id_campo > campi.id // many-to-one
Ref: recensioni.id_utente > utenti.id // many-to-one
Ref: recensioni.id_campo > campi.id // many-to-one
Ref: recensioni.id_struttura > strutture.id // many-to-one
Ref: recensioni.id_prenotazione > prenotazioni.id // many-to-one
